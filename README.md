# MIPT_masterAI_bot — RAG-бот для поступающих в магистратуру МФТИ

## Описание

Этот проект — Telegram-бот, который отвечает на вопросы о поступлении в магистратуру МФТИ, используя Retrieval-Augmented Generation (RAG):
- В качестве базы знаний используются FAQ и официальные правила приёма.
- Для поиска ответов применяется векторный поиск (FAISS) и OpenAI GPT-4o-mini.

---

## Архитектура (схема)

```
Пользователь (Telegram)
        |
        v
[bot_pooling.py]  <-- Telegram API
        |
        v
[rag_bot.py]  <-- RAG: поиск релевантных документов + генерация ответа
        |
        v
[faiss_index/]  <-- Индекс векторной базы (создаётся из FAQ и правил)
        ^
        |
[setup_rag.py]  <-- Скрипт для создания индекса из data_faq.json и rules2025.json
```

---

## Быстрый старт

### 1. Установите зависимости

```bash
pip install -r requirements.txt
```

### 2. Подготовьте переменные окружения

Создайте файл `keys.env` в корне проекта и укажите:
```
TELEGRAM_BOT_TOKEN=ваш_токен_бота
TELEGRAM_BOT_USERNAME=SinichkaAI_bot  # без @
OPENAI_API_KEY=ваш_ключ_OpenAI
OPENAI_API_BASE=https://api.openai.com/v1
```

### 3. Подготовьте базу знаний

- Поместите файлы `data/data_faq.json` и `data/rules2025.json` в папку `data/`.
- Формат: список объектов с полем `text` (и опционально `metadata`, для правил — `section`).

### 4. Создайте векторный индекс

```bash
python setup_rag.py
```
- После выполнения появится папка `faiss_index/`.

### 5. Запустите Telegram-бота

```bash
python bot_pooling.py
```
- Бот будет отвечать на упоминания в Telegram (например, `@SinichkaAI_bot ваш вопрос`).

---

## Тестирование и отладка

- Для локального теста используйте ноутбук `test.ipynb` — можно задавать вопросы и смотреть, какие документы попадают в контекст.
- Для изменения логики поиска или генерации — редактируйте `rag_bot.py`.

---

## Кратко о файлах

- `setup_rag.py` — создание индекса из базы знаний.
- `rag_bot.py` — логика поиска и генерации ответа.
- `bot_pooling.py` — Telegram-бот (polling).
- `config.py` — загрузка переменных окружения.
- `data/` — база знаний (FAQ и правила).
- `faiss_index/` — векторный индекс (создаётся автоматически).

---

## Контакты
Если бот не может ответить на важный вопрос — обратитесь к Юлии Синицыной.
